#
# Copyright 2020 Huawei Technologies Co., Ltd.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

---

############ OCD ############

- hosts: ocdconsolidated
  become: yes
  tags:
  - ocdhost
  - ocdconsolidated

  roles:
  - k8s
  - helm
  - eg_certs
  - eg_helm-repo

############ Center ############

### Infrastructure ###

- hosts: center-infra
  become: yes
  tags:
  - center-infra
  - center

  roles:
  - k8s

### Pre-Requisites ###

- hosts: prerequisitecenter
  become: yes
  tags:
  - prerequisitecenter
  - center

  roles:
  - helm
  - kubeconfig

### Other 3rd party related ###

- hosts: thirdpartycenter
  become: yes
  tags:
  - thirdpartycenter
  - center

  roles:
  - grafana

### EdgeGallery related ###

- hosts: egcenter
  become: yes
  tags:
  - egcenter
  - center

  roles:
  - eg_pre_require
  - eg_secret
  - eg_set-helm-repo
  - service_center
  - eg_user-mgmt
  - eg_mecm-meo
  - eg_mecm-fe
  - eg_appstore
  - eg_developer

############ Edge ############

### Infrastructure ###
- hosts: edge-infra
  become: yes
  tags:
  - edge-infra
  - edge

  roles:
  - docker
  - k3s

### Pre-Requisites ###

- hosts: prerequisiteedge
  become: yes
  tags:
  - prerequisiteedge
  - edge

  roles:
  - helm

### Other 3rd party related ###

- hosts: thirdpartyedge
  become: yes
  tags:
  - thirdpartyedge
  - edge

  roles:
  - rabbitmq
  - prometheus
  - kubeconfig
  - mepkubeconfig
  - cadvisor

### EdgeGallery related ###

- hosts: egedge
  become: yes
  tags:
  - egedge
  - edge

  roles:
  - eg_pre_require
  - eg_secret
  - eg_set-helm-repo
  - eg_mep
  - eg_mecm-mepm
